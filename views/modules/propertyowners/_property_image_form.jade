include ../../mixins/images

form.js-property-image-form
  .row
    - var imagesPerRow = 3
    - var rows = Math.ceil(property.images.length / imagesPerRow)
    - var rowCount = 0
    while rowCount < rows
      - var current = imagesPerRow * rowCount
      - var end = Math.min(current + imagesPerRow, property.images.length)
      .row
        while current < end
          .four.columns
            - var img = property.images[current];
            +image_with_overlay(img.url, 150, 150)(class='js-delete-image', data-image-id=img.id)
              i.fa.fa-trash-o.fa-4x.property-image-overlay-content

          - current++

      - rowCount++

  .row.property-image-controls
    label Add Photos
    input.js-file-input(type="file", name="file", data-url="/property/#{property.id}/picture")
